{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "Elastic News Agent Relationships",
  "description": "Entity relationships and interactions between agents in the Elastic News newsroom system",
  "version": "1.0.0",
  "agents": [
    {
      "id": "news_chief",
      "name": "News Chief",
      "port": 8080,
      "role": "Coordinator",
      "responsibilities": [
        "Assigns stories to Reporter",
        "Orchestrates the entire workflow",
        "Tracks story status and completion",
        "Manages task delegation to all agents"
      ],
      "sends_to": [
        {
          "agent_id": "reporter",
          "interaction_type": "task_assignment",
          "data_sent": {
            "story_id": "Unique identifier for the story",
            "topic": "Story topic/subject",
            "angle": "Editorial angle or perspective",
            "target_length": "Target word count",
            "deadline": "Publication deadline",
            "priority": "Story priority level"
          },
          "purpose": "Initiates article creation process"
        },
        {
          "agent_id": "researcher",
          "interaction_type": "research_request",
          "data_sent": {
            "topic": "Research topic",
            "context": "Additional context for research"
          },
          "purpose": "Requests background research and data gathering"
        },
        {
          "agent_id": "editor",
          "interaction_type": "review_request",
          "data_sent": {
            "story_id": "Story identifier",
            "article": "Article content to review"
          },
          "purpose": "Requests editorial review"
        },
        {
          "agent_id": "publisher",
          "interaction_type": "publish_request",
          "data_sent": {
            "story_id": "Story identifier",
            "article": "Final article content",
            "metadata": "Publication metadata"
          },
          "purpose": "Requests article publication"
        }
      ],
      "receives_from": [
        {
          "agent_id": "reporter",
          "interaction_type": "status_update",
          "data_received": {
            "story_id": "Story identifier",
            "status": "Current status (in_progress, draft_complete, etc.)",
            "article": "Article content"
          }
        },
        {
          "agent_id": "researcher",
          "interaction_type": "research_response",
          "data_received": {
            "research_data": "Gathered research and facts"
          }
        },
        {
          "agent_id": "editor",
          "interaction_type": "review_response",
          "data_received": {
            "editorial_review": "Review feedback and suggestions",
            "revised_article": "Edited article content"
          }
        },
        {
          "agent_id": "publisher",
          "interaction_type": "publish_confirmation",
          "data_received": {
            "status": "Publication status",
            "elasticsearch_id": "Document ID in Elasticsearch",
            "file_path": "Path to saved article file"
          }
        }
      ],
      "dependencies": [],
      "protocol": "A2A 0.3.0"
    },
    {
      "id": "reporter",
      "name": "Reporter",
      "port": 8081,
      "role": "Content Creator",
      "responsibilities": [
        "Writes articles based on story assignments",
        "Requests research from Researcher",
        "Consults Archivist for historical context",
        "Integrates multiple data sources into cohesive narratives"
      ],
      "sends_to": [
        {
          "agent_id": "researcher",
          "interaction_type": "research_request",
          "data_sent": {
            "topic": "Story topic",
            "angle": "Editorial angle",
            "context": "Additional context needed"
          },
          "purpose": "Requests factual research and data"
        },
        {
          "agent_id": "archivist",
          "interaction_type": "search_request",
          "data_sent": {
            "query": "Search query for historical articles",
            "topic": "Story topic"
          },
          "purpose": "Searches for past coverage and historical context",
          "protocol": "A2A (External Agent)"
        },
        {
          "agent_id": "news_chief",
          "interaction_type": "article_submission",
          "data_sent": {
            "story_id": "Story identifier",
            "article": "Completed article content",
            "status": "Article status"
          },
          "purpose": "Submits completed article"
        }
      ],
      "receives_from": [
        {
          "agent_id": "news_chief",
          "interaction_type": "story_assignment",
          "data_received": {
            "story_id": "Story identifier",
            "topic": "Story topic",
            "angle": "Editorial angle",
            "target_length": "Target word count",
            "deadline": "Deadline",
            "priority": "Priority level"
          }
        },
        {
          "agent_id": "researcher",
          "interaction_type": "research_response",
          "data_received": {
            "research_data": "Facts, statistics, and background information",
            "sources": "Research sources",
            "key_findings": "Important discoveries"
          }
        },
        {
          "agent_id": "archivist",
          "interaction_type": "search_response",
          "data_received": {
            "historical_articles": "Relevant past articles",
            "context": "Historical context and coverage patterns"
          }
        }
      ],
      "dependencies": [
        "researcher",
        "archivist"
      ],
      "protocol": "A2A 0.3.0"
    },
    {
      "id": "researcher",
      "name": "Researcher",
      "port": 8083,
      "role": "Data Gatherer",
      "responsibilities": [
        "Gathers facts and statistics on assigned topics",
        "Provides background information",
        "Synthesizes research using Claude Sonnet 4",
        "Validates information accuracy"
      ],
      "sends_to": [
        {
          "agent_id": "reporter",
          "interaction_type": "research_response",
          "data_sent": {
            "research_data": "Structured research findings",
            "sources": "Information sources",
            "key_findings": "Critical facts and statistics",
            "background": "Contextual background information"
          },
          "purpose": "Provides research data for article writing"
        },
        {
          "agent_id": "news_chief",
          "interaction_type": "research_complete",
          "data_sent": {
            "status": "Research completion status",
            "summary": "Research summary"
          },
          "purpose": "Confirms research task completion"
        }
      ],
      "receives_from": [
        {
          "agent_id": "reporter",
          "interaction_type": "research_request",
          "data_received": {
            "topic": "Research topic",
            "angle": "Editorial angle",
            "context": "Additional context"
          }
        },
        {
          "agent_id": "news_chief",
          "interaction_type": "research_request",
          "data_received": {
            "topic": "Research topic",
            "context": "Research context"
          }
        }
      ],
      "dependencies": [],
      "ai_model": "Claude Sonnet 4",
      "protocol": "A2A 0.3.0"
    },
    {
      "id": "editor",
      "name": "Editor",
      "port": 8082,
      "role": "Content Reviewer",
      "responsibilities": [
        "Reviews articles for grammar and style",
        "Checks tone and consistency",
        "Validates word count against targets",
        "Provides editorial feedback and suggestions"
      ],
      "sends_to": [
        {
          "agent_id": "news_chief",
          "interaction_type": "review_response",
          "data_sent": {
            "story_id": "Story identifier",
            "editorial_review": {
              "approved": "Boolean approval status",
              "feedback": "Editorial feedback and suggestions",
              "grammar_issues": "Grammar corrections",
              "tone_assessment": "Tone analysis",
              "word_count_check": "Word count validation"
            },
            "revised_article": "Article content (unchanged, Editor doesn't modify content)"
          },
          "purpose": "Returns reviewed and edited article"
        }
      ],
      "receives_from": [
        {
          "agent_id": "news_chief",
          "interaction_type": "review_request",
          "data_received": {
            "story_id": "Story identifier",
            "article": "Article content to review",
            "target_length": "Target word count"
          }
        }
      ],
      "dependencies": [],
      "ai_model": "Claude Sonnet 4",
      "protocol": "A2A 0.3.0"
    },
    {
      "id": "publisher",
      "name": "Publisher",
      "port": 8084,
      "role": "Publication Manager",
      "responsibilities": [
        "Generates SEO tags and categories using Claude Sonnet 4",
        "Indexes articles to Elasticsearch with metadata",
        "Saves articles as markdown files",
        "Updates article status to 'published'",
        "Manages article metadata and storage"
      ],
      "sends_to": [
        {
          "agent_id": "elasticsearch",
          "interaction_type": "index_request",
          "data_sent": {
            "story_id": "Story identifier",
            "headline": "Article headline",
            "content": "Full article content",
            "topic": "Story topic",
            "word_count": "Article word count",
            "published_at": "Publication timestamp",
            "status": "Publication status",
            "research_data": "Associated research data",
            "editorial_review": "Editorial review data",
            "tags": "SEO tags",
            "summary": "Article summary"
          },
          "purpose": "Persists article to search index",
          "protocol": "Elasticsearch REST API"
        },
        {
          "agent_id": "news_chief",
          "interaction_type": "publish_confirmation",
          "data_sent": {
            "story_id": "Story identifier",
            "status": "published",
            "elasticsearch_id": "Document ID in Elasticsearch",
            "file_path": "Path to saved markdown file",
            "published_at": "Publication timestamp"
          },
          "purpose": "Confirms successful publication"
        }
      ],
      "receives_from": [
        {
          "agent_id": "news_chief",
          "interaction_type": "publish_request",
          "data_received": {
            "story_id": "Story identifier",
            "article": "Final article content",
            "metadata": {
              "headline": "Article headline",
              "topic": "Story topic",
              "tags": "SEO tags",
              "summary": "Article summary",
              "research_data": "Research metadata",
              "editorial_review": "Editorial review metadata"
            }
          }
        }
      ],
      "dependencies": [
        "elasticsearch"
      ],
      "ai_model": "Claude Sonnet 4",
      "protocol": "A2A 0.3.0"
    },
    {
      "id": "archivist",
      "name": "Archivist",
      "type": "external",
      "host": "Elastic Cloud (Kibana Agent Builder)",
      "role": "Historical Search",
      "responsibilities": [
        "Searches historical articles in Elasticsearch",
        "Provides context about past coverage",
        "Supports ES|QL queries",
        "Index exploration and full-text search"
      ],
      "sends_to": [
        {
          "agent_id": "reporter",
          "interaction_type": "search_response",
          "data_sent": {
            "results": "Search results",
            "historical_articles": "Relevant past articles",
            "context": "Coverage context and patterns"
          },
          "purpose": "Provides historical context for article writing"
        }
      ],
      "receives_from": [
        {
          "agent_id": "reporter",
          "interaction_type": "search_request",
          "data_received": {
            "query": "Search query",
            "topic": "Search topic",
            "filters": "Optional search filters"
          }
        }
      ],
      "dependencies": [
        "elasticsearch"
      ],
      "protocol": "A2A 0.3.0",
      "authentication": "ApiKey"
    }
  ],
  "workflow": {
    "description": "Complete article production workflow from assignment to publication",
    "steps": [
      {
        "step": 1,
        "action": "Story Assignment",
        "from": "news_chief",
        "to": "reporter",
        "description": "News Chief assigns story with topic, angle, and requirements"
      },
      {
        "step": 2,
        "action": "Research Request",
        "from": "reporter",
        "to": "researcher",
        "description": "Reporter requests research on assigned topic"
      },
      {
        "step": 3,
        "action": "Research Response",
        "from": "researcher",
        "to": "reporter",
        "description": "Researcher provides facts, statistics, and background information"
      },
      {
        "step": 4,
        "action": "Historical Search",
        "from": "reporter",
        "to": "archivist",
        "description": "Reporter queries Archivist for past coverage"
      },
      {
        "step": 5,
        "action": "Historical Context",
        "from": "archivist",
        "to": "reporter",
        "description": "Archivist returns relevant historical articles"
      },
      {
        "step": 6,
        "action": "Article Draft",
        "from": "reporter",
        "to": "news_chief",
        "description": "Reporter submits completed article draft"
      },
      {
        "step": 7,
        "action": "Editorial Review Request",
        "from": "news_chief",
        "to": "editor",
        "description": "News Chief sends article to Editor for review"
      },
      {
        "step": 8,
        "action": "Editorial Review Response",
        "from": "editor",
        "to": "news_chief",
        "description": "Editor returns reviewed article with feedback and SEO metadata"
      },
      {
        "step": 9,
        "action": "Publication Request",
        "from": "news_chief",
        "to": "publisher",
        "description": "News Chief sends approved article to Publisher"
      },
      {
        "step": 10,
        "action": "Elasticsearch Indexing",
        "from": "publisher",
        "to": "elasticsearch",
        "description": "Publisher indexes article to Elasticsearch"
      },
      {
        "step": 11,
        "action": "Publication Confirmation",
        "from": "publisher",
        "to": "news_chief",
        "description": "Publisher confirms successful publication with metadata"
      }
    ]
  },
  "external_systems": [
    {
      "id": "elasticsearch",
      "name": "Elasticsearch",
      "type": "database",
      "purpose": "Article storage and search",
      "interactions": [
        {
          "agent_id": "publisher",
          "interaction_type": "write",
          "description": "Indexes articles with full metadata"
        },
        {
          "agent_id": "archivist",
          "interaction_type": "read",
          "description": "Searches historical articles"
        }
      ],
      "protocol": "Elasticsearch REST API"
    },
    {
      "id": "anthropic_api",
      "name": "Anthropic Claude API",
      "type": "ai_service",
      "purpose": "AI-powered content generation and analysis",
      "interactions": [
        {
          "agent_id": "researcher",
          "description": "Research synthesis and fact gathering"
        },
        {
          "agent_id": "reporter",
          "description": "Article writing and content generation"
        },
        {
          "agent_id": "editor",
          "description": "Editorial review and SEO metadata generation"
        },
        {
          "agent_id": "publisher",
          "description": "Tag generation and content optimization"
        }
      ],
      "model": "Claude Sonnet 4"
    }
  ],
  "communication_protocol": {
    "name": "Agent2Agent (A2A)",
    "version": "0.3.0",
    "sdk": "a2a-python v0.3.8",
    "transport": "HTTP/JSON",
    "agent_discovery": "/.well-known/agent-card.json",
    "capabilities": [
      "streaming",
      "push_notifications",
      "state_transition_history",
      "concurrent_tasks"
    ]
  }
}
